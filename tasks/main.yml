# SPDX-FileCopyrightText: 2020 Helmholtz Centre for Environmental Research (UFZ)
# SPDX-FileCopyrightText: 2020 Helmholtz-Zentrum Dresden - Rossendorf (HZDR)
#
# SPDX-License-Identifier: Apache-2.0

---
- name: Set OS family dependent variables
  include_vars: "{{ ansible_os_family|lower }}.yml"

- include: install.docker-machine.yml
  become: yes

- include: install.debianlike.yml
  become: yes
  when: ansible_os_family == "Debian"

- include: configuration.yml
  become: yes

- include: register.yml
  become: yes
  when:
    - gitlab_runner.registration_token | default('')
    - gitlab_runner.registration_token | length > 0
  loop: "{{ gitlab_runner_list }}"
  loop_control:
    loop_var: gitlab_runner

...
